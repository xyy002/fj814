
#include "includes.h"


void exact_event_process(void)
{
	/**********0.1ms*************/
	TimeUs++;
	
	/**********2ms*************/
	if(TimeUs<20)return;
		TimeUs=0;Time2Ms++;
	t2msFlag=1; 

	/**************************/	
	if(Time2Ms<5)return;    
		Time2Ms=0;Time10Ms++;
	/**********10ms*************/
	t10msFlag=1;

	/***************************/
	if(Time10Ms<10)return;    
		Time10Ms=0;Time100Ms++;
	/**********100ms************/
	//t100msFlag=1;

	/***************************/
	if(Time100Ms<10)return;       
	Time100Ms=0;TimeSec++;
	/**********1sec*************/
	//t1SecFlag=1;
	
	/***************************/
	if(TimeSec<60)return;       
	TimeSec=0;
	/**********1min*************/
	if((bSysRunFlg)&&(bTestModeFlg==off))
	{
		if(TimeMin)TimeMin--;
	}	
}
   
void WDT_INITIAL (void) 
{
	CLRWDT();              //ï¿½å¿´ï¿½Å¹ï¿½
    MISC0  = 0B00000000;   //ï¿½ï¿½ï¿½Å¹ï¿½Ê±ï¿½ï¿½32k
	WDTCON = 0B00001011;   //WDTPS=1010=1:1024,Ô¤ï¿½ï¿½Æµ1:1
                        	//ï¿½ï¿½Ê±Ê±ï¿½ï¿½=(1024*1)/32000=32ms             
}

void interrupt ISR(void)            	//PIC_HI-TECHÊ¹ï¿½ï¿½
{ 
  	//ï¿½ï¿½Ê±ï¿½ï¿½2ï¿½ï¿½ï¿½Ð¶Ï´ï¿½ï¿½ï¿½**********************
	if(T2UIE && T2UIF)                	
	{
		T2UIF = 1;                    	//Ð´1ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î? 
		ReadRf433();              	//ï¿½ï¿½È¡433Mï¿½ï¿½ï¿½ï¿½
		exact_event_process();

	} 

  	//ï¿½ï¿½Ê±ï¿½ï¿½4ï¿½ï¿½ï¿½Ð¶Ï´ï¿½ï¿½ï¿½********************** 4KHZ/250US
	if(T4UIE && T4UIF)   //185US            2.7KHZ 	
	{
		T4UIF = 1;                    	//Ð´1ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î?  

		DisplayHandler();
		//RGBbreathing();
		if(BuzzerCnt)  //BEEP TIME
		{
			BELL=~BELL;
			BuzzerCnt--;	
			if(BuzzerCnt==0)
			{
				BELL=off;
			}
		}
	} 
    if(URTE && TXEF)            //ï¿½ï¿½ï¿½Í¿ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½ && ï¿½ï¿½ï¿½Í¼Ä´ï¿½ï¿½ï¿½Îªï¿½ï¿½
    {	
		send_uart_data();
	}	
	if(EPIF0&0x10)
	{
		EPIF0|=0x10;
	}
}  

void Sys_init()
{

	 OSCCON = 0B01100001;   //WDT 32KHZ IRCF=111=16MHZ/2=8MHZ,0.125US/T
	// OSCCON = 0B01110001;   //WDT 32KHZ IRCF=111=16MHZ/2=8MHZ,62.5NS/T
	 //Bit0=1,ÏµÍ³Ê±ï¿½ï¿½Îªï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½
	 //Bit0=0,Ê±ï¿½ï¿½Ô´ï¿½ï¿½FOSC<2ï¿½ï¿½0>ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½Ê±Ñ¡ï¿½ï¿½	
	 //OSCCON = 0B01110001;	 //16MHZ 1:1
	 //BIT7~BIT4:ï¿½ï¿½Ê±ï¿½Ó£ï¿½ÏµÍ³Ê±ï¿½Ó£ï¿½ï¿½ï¿½Æµï¿½ï¿½Ñ¡ï¿½ï¿½0111(1:1),0110(1:2),0101(1:4),0100(1:8),0011(1:16),0010,(1:32),0001(1:64),1xxx(1:128),0000(32kHz LIRC)
	 //BIT3:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±×´Ì¬Î»ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½FOSC<2:0>Ö¸ï¿½ï¿½ï¿½ï¿½ï¿½â²¿Ê±ï¿½ï¿½Ö®ï¿½Â£ï¿½0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½Ö®ï¿½ï¿½
	 //BIT2:ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½Ê±ï¿½ï¿½×´Ì¬ï¿½ï¿½ 1ï¿½ï¿½HIRC is readyï¿½ï¿½0ï¿½ï¿½HIRC is not ready
	 //Bit1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½Ê±ï¿½ï¿½×´Ì¬ï¿½ï¿½1ï¿½ï¿½LIRC is readyï¿½ï¿½0ï¿½ï¿½LIRC is not ready
	 //Bit0:ÏµÍ³Ê±ï¿½ï¿½Ñ¡ï¿½ï¿½Î»ï¿½ï¿½1ï¿½ï¿½ÏµÍ³Ê±ï¿½ï¿½Ñ¡ï¿½ï¿½Îªï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½Ê±ï¿½ï¿½Ô´ï¿½ï¿½FOSC<2:0>ï¿½ï¿½ï¿½ï¿½
	 
	 INTCON = 0B00000000; //
	 
	 PORTA = 0B00000000;	 
	 TRISA = 0B00000000;	 //PAï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿? 0-ï¿½ï¿½ï¿? 1-ï¿½ï¿½ï¿½ï¿½
	 PORTB = 0B00000000;	 
	 TRISB = 0B00010000;	 //PBï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿? 0-ï¿½ï¿½ï¿? 1-ï¿½ï¿½ï¿½ï¿½ 						 
	 PORTC = 0B00000000;	 
	 TRISC = 0B00000000;	 //PCï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿? 0-ï¿½ï¿½ï¿? 1-ï¿½ï¿½ï¿½ï¿½ 	 
	 PORTD = 0B00000000;	 
	 TRISD = 0B00000000;	 //PDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿? 0-ï¿½ï¿½ï¿? 1-ï¿½ï¿½ï¿½ï¿½
	 
	 WPUA = 0B00000000; 	 //PAï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 WPUB = 0B00010000; 	 //PBï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 WPUC = 0B00000000; 	 //PCï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 WPUD = 0B00000000; 	 //PDï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 
	 WPDA = 0B00000000; 	 //PAï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 WPDB = 0B00000000; 	 //PBï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 WPDC = 0B00000000; 	 //PCï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 WPDD = 0B00000000; 	 //PDï¿½Ë¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 1-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 
	 PSRC0	= 0B11111111;	 //PORTA,PORTBÔ´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
	 //BIT7~BIT6:PORTB[7:4]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,BIT5~BIT4:PORTB[3:0]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
	 //BIT3~BIT2:PORTA[7:4]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,BIT1~BIT0:PORTA[3:0]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 
	 PSRC1	= 0B11111111;	 //PORTC,PORTDÔ´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?    
	 //BIT7~BIT6:PORTD[7:4]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,BIT5~BIT4:PORTD[3:0]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
	 //BIT3~BIT2:PORTC[7:4]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,BIT1~BIT0:PORTC[3:0]Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	 
	 PSINK0 = 0B11111111;	 //PORTAï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0:ï¿½ï¿½Ð¡ï¿½ï¿½1:ï¿½ï¿½ï¿?
	 PSINK1 = 0B11111111;	 //PORTBï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0:ï¿½ï¿½Ð¡ï¿½ï¿½1:ï¿½ï¿½ï¿?
	 PSINK2 = 0B11111111;	 //PORTCï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0:ï¿½ï¿½Ð¡ï¿½ï¿½1:ï¿½ï¿½ï¿?
	 PSINK3 = 0B11111111;	 //PORTDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 0:ï¿½ï¿½Ð¡ï¿½ï¿½1:ï¿½ï¿½ï¿? 
	 
	 ANSELA = 0B00000000;
	 
	//    AFP0 |= 0B01010000; 
	//    AFP1 |= 0B00000010; 
	//    AFP2 |= 0B00000000; //
}

/*-------------------------------------------------
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½Time1Initial
 *	ï¿½ï¿½ï¿½Ü£ï¿½     TIM1 CH1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?32kHzï¿½Ä·ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
 *	ï¿½ï¿½ï¿½Ø²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 -------------------------------------------------*/
void Time1Initial(void)
{
	//PCKEN |=0B00000010;    //Ê¹ï¿½ï¿½timer1Ê±ï¿½ï¿½Ä£ï¿½ï¿½
    CKOCON=0B00100000;
    TCKSRC=0B00000001;    //TIM1Ê±ï¿½ï¿½ÎªHIRCï¿½ï¿½1ï¿½ï¿½Æµ 16k
    //TCKSRC=0B00000011;    //TIM1Ê±ï¿½ï¿½ÎªHIRCï¿½ï¿½2ï¿½ï¿½Æµ
    //BIT7ï¿½ï¿½Æµï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½1 = 256K ï¿½ï¿½Æµï¿½ï¿½Ä£Ê½,0 = 32K ï¿½ï¿½Æµï¿½ï¿½Ä£Ê½
    //BIT6~BIT4TIM2Ê±ï¿½ï¿½Ô´Ñ¡ï¿½ï¿½Î»
			//Öµ	Ê±ï¿½ï¿½Ô´
			//0	ÏµÍ³Ê±ï¿½ï¿½/ï¿½ï¿½Ê±ï¿½ï¿½
			//1	HIRC
			//2	XTÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½ï¿½
			//3	HIRCï¿½ï¿½2ï¿½ï¿½Æµ
			//4	XTÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½Óµï¿½2ï¿½ï¿½Æµ
			//5	LIRC
			//6	LPÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½ï¿½
			//7	LPÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½Óµï¿½2Î»Æµ
		//BIT3:ï¿½ï¿½ï¿½ï¿½Î»
		//BIT2~BIT1:TIM1Ê±ï¿½ï¿½Ô´Ñ¡ï¿½ï¿½Î»
			//Öµ	Ê±ï¿½ï¿½Ô´
			//0	ÏµÍ³Ê±ï¿½ï¿½/ï¿½ï¿½Ê±ï¿½ï¿½
			//1	HIRC
			//2	XTÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½ï¿½
			//3	HIRCï¿½ï¿½2ï¿½ï¿½Æµ
			//4	XTÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½Óµï¿½2ï¿½ï¿½Æµ
			//5	LIRC
			//6	LPÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½ï¿½
			//7	LPÊ±ï¿½ï¿½/ï¿½â²¿Ê±ï¿½Óµï¿½2Î»Æµ


    TIM1CR1 =0B10000101;  //Ô¤ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½
    //BIT7:ï¿½Ô¶ï¿½Ô¤×°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»
			//0ï¿½ï¿½TIM1_ARRï¿½Ä´ï¿½ï¿½ï¿½Ã»ï¿½Ð»ï¿½ï¿½å£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ô±ï¿½Ö±ï¿½ï¿½Ð´ï¿½ë£»
			//1ï¿½ï¿½TIM1_ARRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤×°ï¿½Ø»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½å¡£
		//BIT6~BIT5:Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê?
			//00ï¿½ï¿½ï¿½ï¿½ï¿½Ø¶ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý·ï¿½ï¿½ï¿½Î»(DIR)ï¿½ï¿½ï¿½Ï»ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//01ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê?1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ïºï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½(TIM1_CCMRxï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½CciS=00)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿½ï¿½Ð¶Ï±ï¿½Ö¾Î»ï¿½ï¿½Ö»ï¿½Ú¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿?1ï¿½ï¿½ 
			//10:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê?2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ïºï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½(TIM1_CCMRxï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½CciS=00)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿½ï¿½Ð¶Ï±ï¿½Ö¾Î»ï¿½ï¿½Ö»ï¿½Ú¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿?1ï¿½ï¿½
			//11ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê?3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ïºï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½(TIM1_CCMRxï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½CciS=00)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿½ï¿½Ð¶Ï±ï¿½Ö¾Î»ï¿½ï¿½ï¿½Ú¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ïºï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?1ï¿½ï¿½
		//BIT4:ï¿½ï¿½ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT3:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½
			//0ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö¹ï¿½ï¿½
			//1ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½Î¸ï¿½ï¿½ï¿½ï¿½Â¼ï¿½(ï¿½ï¿½ï¿½CENÎ»)Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö¹ï¿½ï¿½
		//BIT2:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô´
			//0ï¿½ï¿½ï¿½ï¿½ï¿½UDISï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½
			//ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½)
			//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»
			//Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¸ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½UDISï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ö»ï¿½Ðµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½Å²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½ï¿½ï¿½UIFï¿½ï¿½1ï¿½ï¿½
			//ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½)
		//BIT1:	ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½
			//0ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(UEV)ï¿½Â¼ï¿½ï¿½ï¿½
			//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?/ï¿½ï¿½ï¿½ï¿½
			//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½
			//Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½×°ï¿½ï¿½ï¿½ï¿½ï¿½Çµï¿½Ô¤×°ï¿½ï¿½Öµï¿½ï¿?
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½Ó°ï¿½Ó¼Ä´ï¿½ï¿½ï¿½(ARRï¿½ï¿½PSCï¿½ï¿½CCRx)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Çµï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»ï¿½ï¿½Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤ï¿½ï¿½Æµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½ï¿½ï¿?
		//BIT0	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ T1CEN
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½Ê¹ï¿½Ü¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½


    TIM1SMCR=0B00000000;
	    //BIT7ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½Ä£Ê½
			//0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(TRGI)ï¿½Ïµï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½Ó³ï¿½ï¿½Ë£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Ä´Ó¶ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½(Í¨ï¿½ï¿½TRGO)ï¿½ï¿½

		//BIT6~BIT4ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½,ï¿½ï¿½3Î»Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½Í¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ë¡£
			//000ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½ITR0ï¿½ï¿½ï¿½Óµï¿½TIM6 TRGO (ï¿½ï¿½ï¿½ï¿½ï¿½Ã»ï¿½ï¿½TIM6ï¿½ï¿½ï¿½ï¿½ï¿½Ô¹Ì¶ï¿½ï¿½ï¿½0)	
			//001ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½	
			//010ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½ITR2ï¿½ï¿½ï¿½Óµï¿½TIM5 TRGO(ï¿½ï¿½ï¿½ï¿½ï¿½Ã»ï¿½ï¿½TIM5ï¿½ï¿½ï¿½ï¿½ï¿½Ô¹Ì¶ï¿½ï¿½ï¿½0)
			//011ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½	
			//100ï¿½ï¿½TI1ï¿½Ä±ï¿½ï¿½Ø¼ï¿½ï¿½ï¿½ï¿?(TI1F_ED)
			//101ï¿½ï¿½ï¿½Ë²ï¿½ï¿½ï¿½Ä¶ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?1(TI1FP1)
			//110ï¿½ï¿½ï¿½Ë²ï¿½ï¿½ï¿½Ä¶ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?2(TI2FP2)
			//111ï¿½ï¿½ï¿½â²¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(ETRF)
			//×¢ï¿½ï¿½ï¿½ï¿½Ð©Î»Ö»ï¿½ï¿½ï¿½ï¿½Î´ï¿½Ãµï¿½(ï¿½ï¿½SMS=000)Ê±ï¿½ï¿½ï¿½Ä±ä£¬ï¿½Ô±ï¿½ï¿½ï¿½ï¿½Ú¸Ä±ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä±ï¿½ï¿½Ø¼ï¿½â¡£
		//BIT3:ï¿½ï¿½ï¿½ï¿½
		//BIT2~BIT0ï¿½ï¿½Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½Ä£Ê½Ñ¡ï¿½ï¿½,ï¿½ï¿½Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½â²¿ï¿½ÅºÅ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Åºï¿½(TRGI)ï¿½ï¿½ï¿½ï¿½Ð§ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½Ðµï¿½ï¿½â²¿ï¿½ï¿½ï¿½ë¼«ï¿½ï¿½ï¿½ï¿½ï¿?(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ¼Ä´ï¿½ï¿½ï¿½ï¿½Í¿ï¿½ï¿½Æ¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿?)
			//000ï¿½ï¿½Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¹ ï¿½C ï¿½ï¿½ï¿½CEN=1ï¿½ï¿½ï¿½ï¿½Ô¤ï¿½ï¿½Æµï¿½ï¿½Ö±ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//001ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½1 ï¿½C ï¿½ï¿½ï¿½ï¿½TI1FP1ï¿½Äµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI2FP2ï¿½Ä±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//010ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½2 ï¿½C ï¿½ï¿½ï¿½ï¿½TI2FP2ï¿½Äµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI1FP1ï¿½Ä±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//011ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½3 ï¿½C ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Äµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI1FP1ï¿½ï¿½TI2FP2ï¿½Ä±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//100ï¿½ï¿½ï¿½ï¿½Î»Ä£Ê½ ï¿½C ï¿½ï¿½Ñ¡ï¿½ÐµÄ´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(TRGI)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Â¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÅºÅ¡ï¿½
			//101ï¿½ï¿½ï¿½Å¿ï¿½Ä£Ê½ ï¿½C ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(TRGI)Îªï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½Ó¿ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½Í£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö?(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½Ü¿ØµÄ¡ï¿½
			//110ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½ ï¿½C ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TRGIï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»)ï¿½ï¿½Ö»ï¿½Ð¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü¿ØµÄ¡ï¿½
			//111ï¿½ï¿½ï¿½â²¿Ê±ï¿½ï¿½Ä£Ê½1 ï¿½C Ñ¡ï¿½ÐµÄ´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(TRGI)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//×¢ï¿½ï¿½ï¿½ï¿½ï¿½TI1F_EDï¿½ï¿½Ñ¡Îªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(TS=100)Ê±ï¿½ï¿½ï¿½ï¿½ÒªÊ¹ï¿½ï¿½ï¿½Å¿ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÎªTI1F_EDï¿½ï¿½Ã¿ï¿½ï¿½
			//TI1Fï¿½ä»¯Ê±Ö»ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½å£?È»ï¿½ï¿½ï¿½Å¿ï¿½Ä£Ê½ï¿½ï¿½Òªï¿½ï¿½é´¥ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Äµï¿½Æ½ï¿½ï¿½


    TIM1IER =0B00000000;//ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
    //BIT7ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É²ï¿½ï¿½ï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹É²ï¿½ï¿½ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É²ï¿½ï¿½ï¿½Ð¶Ï¡ï¿½
		//BIT6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½Ê¹ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½Ê¹ï¿½Ü´ï¿½ï¿½ï¿½ï¿½Ð¶Ï¡ï¿½
		//BIT5ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½COMï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹COMï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½COMï¿½Ð¶Ï¡ï¿½
		//BIT4ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½4ï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½4ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½4ï¿½Ð¶Ï¡ï¿½
		//BIT3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½3ï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½3ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½3ï¿½Ð¶Ï¡ï¿½
		//BIT2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½2ï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½2ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½2ï¿½Ð¶Ï¡ï¿½
		//BIT1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½1ï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½1ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½1ï¿½Ð¶Ï¡ï¿½
		//BIT0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï¡ï¿½

    TIM1SR1 =0B00000000;
    //BIT7ï¿½ï¿½É²ï¿½ï¿½ï¿½Ð¶Ï±ï¿½ï¿?,Ò»ï¿½ï¿½É²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð§ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¸ï¿½Î»ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½É²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð§ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½É²ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½É²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½âµ½ï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿?
		//BIT6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï±ï¿½ï¿?,ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½(ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú³ï¿½ï¿½Å¿ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½Ê±ï¿½ï¿½ï¿½ï¿½TRGIï¿½ï¿½ï¿½ï¿½Ë¼ï¿½âµ½ï¿½ï¿½Ð§ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½Å¿ï¿½Ä£Ê½ï¿½Âµï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½)Ê±ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¸ï¿½Î»ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½                                        
			//0ï¿½ï¿½ï¿½Þ´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ÏµÈ´ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½
		//BIT5ï¿½ï¿½COMï¿½Ð¶Ï±ï¿½ï¿?,Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½COMï¿½Â¼ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½Ï¿ï¿½ï¿½ï¿½Î»ï¿½ï¿½CciEï¿½ï¿½CciNEï¿½ï¿½OciMï¿½Ñ±ï¿½ï¿½ï¿½ï¿½ï¿½)ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0 ï¿½ï¿½                                                                                                                                                  
			//0ï¿½ï¿½ï¿½ï¿½COMï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½COMï¿½Ð¶ÏµÈ´ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½
		//BIT4ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½4ï¿½Ð¶Ï±ï¿½ï¿?
			//ï¿½Î¿ï¿½CC1IFï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½3ï¿½Ð¶Ï±ï¿½ï¿?
			//ï¿½Î¿ï¿½CC1IFï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½2ï¿½Ð¶Ï±ï¿½ï¿?
			//ï¿½Î¿ï¿½CC1IFï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½1ï¿½Ð¶Ï±ï¿½ï¿?  ï¿½ï¿½ï¿½Í?ï¿½ï¿½CC1ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½È½ï¿½ÖµÆ¥ï¿½ï¿½Ê±ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¶Ô³ï¿½Ä£Ê½ï¿½Â³ï¿½ï¿½ï¿½(ï¿½Î¿ï¿½TIM1_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½CMSÎ»)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Æ¥ï¿½ä·¢ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½TIMx_CNTï¿½ï¿½Öµï¿½ï¿½TIMx_CCR1ï¿½ï¿½ÖµÆ¥ï¿½ä¡£
			//×¢ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¶Ô³ï¿½Ä£Ê½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÖµÎª0Ê±ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÖµÎªARRÊ±ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½ï¿½ï¿½ARR-1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ARRï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ë£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ðµï¿½SMSÎ»Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½Ã±ï¿½Ç¡ï¿½ï¿½ï¿½ï¿½Ç£ï¿½ï¿½ï¿½ï¿½CCR1>ARRï¿½ï¿½ï¿½ï¿½CNTï¿½ïµ½ARRÖµÊ±ï¿½ï¿½CC1IFï¿½ï¿½1ï¿½ï¿½
			//ï¿½ï¿½ï¿½Í?ï¿½ï¿½CC1ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½Í¨ï¿½ï¿½ï¿½ï¿½TIM1_CCR1Lï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½Ñ±ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½)ï¿½ï¿½TIM1_CCR1(ï¿½ï¿½IC1ï¿½Ï¼ï¿½âµ½ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½Ä±ï¿½ï¿½ï¿½)ï¿½ï¿½
		//BIT0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï±ï¿½ï¿?,ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½Ê±ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½Þ¸ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½È´ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½
			//ï¿½ï¿½TIM1_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UDIS=0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿?
			//ï¿½ï¿½TIM1_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UDIS=0ï¿½ï¿½URS=0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_EGRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»ï¿½ï¿½ï¿½ï¿½ï¿½Ô¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//CNTï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½Ê±ï¿½ï¿½
			//ï¿½ï¿½TIM1_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UDIS=0ï¿½ï¿½URS=0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CNTï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½Ê± (ï¿½Î¿ï¿½0
			//ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½Æ¼Ä´ï¿½ï¿½ï¿½TIM1_SMCR)ï¿½ï¿½

    TIM1SR2 =0B00000000;
    
    TIM1EGR =0B00000000;
    //BIT7ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É²ï¿½ï¿½ï¿½Â¼ï¿½,ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½Ò»ï¿½ï¿½É²ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½Þ¶ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½É²ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±MOE=0ï¿½ï¿½BIF=1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶ï¿½(BIE=1)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï¡ï¿?
		//BIT6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½,ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½Þ¶ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½TIM1_SRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½TIF=1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï£ï¿½TIE=1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï¡ï¿?
		//BIT5ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ¸ï¿½ï¿½Â¸ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½0ï¿½ï¿½    
			//0ï¿½ï¿½ï¿½Þ¶ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½CCPC=1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CCIEï¿½ï¿½CCINEï¿½ï¿½CciPï¿½ï¿½CciNPï¿½ï¿½OCIMÎ»ï¿½ï¿½
			//×¢ï¿½ï¿½ï¿½ï¿½Î»Ö»ï¿½ï¿½Óµï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½ï¿½ï¿½Ð§ï¿½ï¿½
		//BIT4ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½4ï¿½Â¼ï¿½
			//ï¿½Î¿ï¿½CC1Gï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½3ï¿½Â¼ï¿½
			//ï¿½Î¿ï¿½CC1Gï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½2ï¿½Â¼ï¿½
			//ï¿½Î¿ï¿½CC1Gï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½1ï¿½Â¼ï¿½
			//ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½Þ¶ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½CC1ï¿½Ï²ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ ï¿½ï¿½Í¨ï¿½ï¿½CC1ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿?
			//ï¿½ï¿½ï¿½ï¿½CC1IF=1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï¡ï¿½ï¿½ï¿½Í?ï¿½ï¿½CC1ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ë£º
			//ï¿½ï¿½Ç°ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CCR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CC1IF=1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½Ð¶Ï¡ï¿½ï¿½ï¿½CC1IFï¿½Ñ¾ï¿½Îª1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CC1OF=1ï¿½ï¿½
		//BIT0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½
			//ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½0ï¿½ï¿½
			//0ï¿½ï¿½ï¿½Þ¶ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½×¢ï¿½ï¿½Ô¤ï¿½ï¿½Æµï¿½ï¿½ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½ï¿½0(ï¿½ï¿½ï¿½ï¿½Ô¤ï¿½ï¿½ÆµÏµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¶Ô³ï¿½Ä£Ê½ï¿½Â»ï¿½DIR=0(ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?0ï¿½ï¿½ï¿½ï¿½DIR=1(ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È?TIM1_ARRï¿½ï¿½Öµï¿½ï¿½

    
    TIM1CCMR1 =0B00000000;//CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿?
		//BIT7ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿?1ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½
			//ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½Ê¹ï¿½ï¿½TIM1_TRIGï¿½ï¿½ï¿½ï¿½ï¿½Ïµï¿½ï¿½â²¿ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Åºï¿?(OC1REF)ï¿½ï¿½ï¿½Î¿ï¿½17.5.9ï¿½ï¿½ï¿½â²¿ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½OCREFï¿½Åºï¿½
			//0ï¿½ï¿½OC1REF ï¿½ï¿½ï¿½ï¿½ETRFï¿½ï¿½ï¿½ë£¨ï¿½ï¿½ï¿½ï¿½TIM1_TRIGï¿½ï¿½ï¿½Å£ï¿½ï¿½ï¿½Ó°ï¿½ì£»
			//1ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½âµ½ETRFï¿½ï¿½ï¿½ï¿½ßµï¿½Æ½ï¿½ï¿½OC1REF=0ï¿½ï¿½
		//BIG6~BIT4ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿?1Ä£Ê½,ï¿½ï¿½3Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î¿ï¿½ï¿½Åºï¿½OC1REFï¿½Ä¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½OC1REFï¿½ï¿½ï¿½ï¿½ï¿½ï¿½OC1ï¿½ï¿½Öµï¿½ï¿½OC1REFï¿½Ç¸ßµï¿½Æ½ï¿½ï¿½Ð§ï¿½ï¿½ï¿½ï¿½OC1ï¿½ï¿½ï¿½ï¿½Ð§ï¿½ï¿½Æ½È¡ï¿½ï¿½ï¿½ï¿½CC1PÎ»ï¿½ï¿½
			//000ï¿½ï¿½ï¿½ï¿½ï¿½á¡£ï¿½ï¿½ï¿½ï¿½È½Ï¼Ä´ï¿½ï¿½ï¿½TIM1_CCR1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CNTï¿½ï¿½Ä±È½Ï¶ï¿½OC1REFï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã£ï¿½
			//001ï¿½ï¿½Æ¥ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CNTï¿½ï¿½Öµï¿½ë²¶ï¿½ï¿½/ï¿½È½Ï¼Ä´ï¿½ï¿½ï¿½1(TIM1_CCR1)ï¿½ï¿½Í¬Ê±ï¿½ï¿½Ç¿ï¿½ï¿½OC1REFÎªï¿½ß¡ï¿½
			//010ï¿½ï¿½Æ¥ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CNTï¿½ï¿½Öµï¿½ë²¶ï¿½ï¿½/ï¿½È½Ï¼Ä´ï¿½ï¿½ï¿½1(TIM1_CCR1)ï¿½ï¿½Í¬Ê±ï¿½ï¿½Ç¿ï¿½ï¿½OC1REFÎªï¿½Í¡ï¿½
			//011ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½TIM1_CCR1=TIM1_CNTÊ±ï¿½ï¿½ï¿½ï¿½×ªOC1REFï¿½Äµï¿½Æ½ï¿½ï¿½
			//100ï¿½ï¿½Ç¿ï¿½ï¿½Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½Ç¿ï¿½ï¿½OC1REFÎªï¿½Í¡ï¿½
			//101ï¿½ï¿½Ç¿ï¿½ï¿½Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½Ç¿ï¿½ï¿½OC1REFÎªï¿½ß¡ï¿½
			//110ï¿½ï¿½PWMÄ£Ê½1ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Ò»ï¿½ï¿½TIM1_CNT<TIM1_CCR1Ê±Í¨ï¿½ï¿½1Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Ò»ï¿½ï¿½TIM1_CNT>TIM1_CCR1Ê±Í¨ï¿½ï¿½1Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½(OC1REF=0)ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½(OC1REF=1)ï¿½ï¿½
			//111ï¿½ï¿½PWMÄ£Ê½2ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Ò»ï¿½ï¿½TIM1_CNT<TIM1_CCR1Ê±Í¨ï¿½ï¿½1Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Ò»ï¿½ï¿½TIM1_CNT>TIM1_CCR1Ê±Í¨ï¿½ï¿½1Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½Ð§ï¿½ï¿½Æ½ï¿½ï¿½
			//×¢1ï¿½ï¿½Ò»ï¿½ï¿½LOCKï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îª3(TIM1_BKRï¿½Ä´ï¿½ï¿½ï¿½ï¿½Ðµï¿½LOCKÎ»)ï¿½ï¿½ï¿½ï¿½CC1S=00(ï¿½ï¿½Í¨ï¿½ï¿½ï¿½ï¿½ï¿½Ã³ï¿½ï¿½ï¿½ï¿?) ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ü±ï¿½ï¿½Þ¸Ä¡ï¿?
			//×¢2ï¿½ï¿½ï¿½ï¿½PWMÄ£Ê½1ï¿½ï¿½PWMÄ£Ê½2ï¿½Ð£ï¿½Ö»ï¿½Ðµï¿½ï¿½È½Ï½ï¿½ï¿½ï¿½Ä±ï¿½ï¿½Ë»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿½Ä£Ê½ï¿½Ð´Ó¶ï¿½ï¿½ï¿½Ä£Ê½ï¿½Ð»ï¿½ï¿½ï¿½PWMÄ£Ê½Ê±ï¿½ï¿½OC1REFï¿½ï¿½Æ½ï¿½Å¸Ä±ä¡£(ï¿½Î¿ï¿½17.5.7PWMÄ£Ê½)
			//×¢3ï¿½ï¿½ï¿½ï¿½ï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½ï¿½Ï£ï¿½ï¿½ï¿½Ð©Î»ï¿½ï¿½Ô¤×°ï¿½ØµÄ¡ï¿½ï¿½ï¿½ï¿½TIM1_CR2ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½CCPC=1ï¿½ï¿½OCM Î»Ö»ï¿½ï¿½ï¿½ï¿½COMï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½Å´ï¿½Ô¤×°ï¿½ï¿½Î»È¡ï¿½ï¿½Öµï¿½ï¿½
		//BIT3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿?1Ô¤×°ï¿½ï¿½Ê¹ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½Ö¹TIM1_CCR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤×°ï¿½Ø¹ï¿½ï¿½Ü£ï¿½ï¿½ï¿½ï¿½ï¿½Ê±Ð´ï¿½ï¿½TIM1_CCR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã¡ï¿?
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CCR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤×°ï¿½Ø¹ï¿½ï¿½Ü£ï¿½ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤×°ï¿½Ø¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CCR1ï¿½ï¿½Ô¤×°ï¿½ï¿½Öµï¿½Ú¸ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç°ï¿½Ä´ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½
			//×¢1ï¿½ï¿½Ò»ï¿½ï¿½LOCKï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îª3(TIM1_BKRï¿½Ä´ï¿½ï¿½ï¿½ï¿½Ðµï¿½LOCKÎ»)ï¿½ï¿½ï¿½ï¿½CC1S=00(ï¿½ï¿½Í¨ï¿½ï¿½ï¿½ï¿½ï¿½Ã³ï¿½ï¿½ï¿½ï¿?) ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ü±ï¿½ï¿½Þ¸Ä¡ï¿?
			//×¢2ï¿½ï¿½Îªï¿½Ë²ï¿½ï¿½ï¿½ï¿½ï¿½È·ï¿½ï¿½ï¿½ï¿½PWMÄ£Ê½ï¿½Â±ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½Ô¤×°ï¿½Ø¹ï¿½ï¿½Ü¡ï¿½ï¿½ï¿½ï¿½Úµï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½(TIM1_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½OPM=1)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç±ï¿½ï¿½ï¿½Ä¡ï¿?
		//BIT2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È½ï¿?1 ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½,ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ú¼Ó¿ï¿½CCï¿½ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿?
			//0ï¿½ï¿½ï¿½ï¿½ï¿½Ý¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CCR1ï¿½ï¿½Öµï¿½ï¿½CC1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç´ò¿ªµÄ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Ð§ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CC1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½Ê±Î?5ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½Ú¡ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ëµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð§ï¿½Øµï¿½ï¿½ï¿½ï¿½Ã¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½Î±È½ï¿½Æ¥ï¿½ä¡£ï¿½ï¿½Ë£ï¿½OCï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½È½Ïµï¿½Æ½ï¿½ï¿½ï¿½ï¿½È½Ï½ï¿½ï¿½ï¿½Þ¹Ø¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð§ï¿½Øºï¿½CC1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îª3ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½Ú¡ï¿½
			//OCFEÖ»ï¿½ï¿½Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã³ï¿½PWM1ï¿½ï¿½PWM2Ä£Ê½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½Ã¡ï¿½
		//BIT1~BIT0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½È½ï¿½1 Ñ¡ï¿½ï¿½ï¿½ï¿½2Î»ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½ï¿½Ä·ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½ï¿?)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Åµï¿½Ñ¡ï¿½ï¿?
			//00ï¿½ï¿½CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿?
			//01ï¿½ï¿½CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ë£¬IC1Ó³ï¿½ï¿½ï¿½ï¿½TI1FP1ï¿½Ï£ï¿½
			//10ï¿½ï¿½CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ë£¬IC1Ó³ï¿½ï¿½ï¿½ï¿½TI2FP1ï¿½Ï£ï¿½
			//11ï¿½ï¿½CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ë£¬IC1Ó³ï¿½ï¿½ï¿½ï¿½TRCï¿½Ï¡ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ë±»Ñ¡ï¿½ï¿½Ê±(ï¿½ï¿½
			//TIM1_SMCRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½TSÎ»Ñ¡ï¿½ï¿½)ï¿½ï¿½
			//×¢ï¿½ï¿½CC1Sï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½ï¿½Ø±ï¿½Ê±(TIM1_CCER1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½CC1E=0)ï¿½ï¿½ï¿½Ç¿ï¿½Ð´ï¿½Ä¡ï¿½


    TIM1CCMR2 =0B00000000;
    TIM1CCMR3 =0B00000000;
	TIM1CCMR4 =0B00000000; //4
    //TIM1CCMR4 =0B01101000; //4
    
    TIM1CCER1 =0B00000000; //ï¿½È½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ü£ï¿½ï¿½Íµï¿½Æ½ï¿½ï¿½Ð§ï¿½ï¿½ï¿½È½ï¿½ï¿½ï¿?1ï¿½ï¿½ï¿½Ê¹ï¿½Ü£ï¿½ï¿½Íµï¿½Æ½ï¿½ï¿½Ð?
    //BIT7ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¡ï¿½ï¿½Î¿ï¿½CC1NPï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT6ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ü¡ï¿½ï¿½Î¿ï¿½CC1NEï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT5ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¡ï¿½ï¿½Î¿ï¿½CC1Pï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT4ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½2ï¿½ï¿½ï¿½Ê¹ï¿½Ü¡ï¿½ï¿½Î¿ï¿½CC1Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		//BIT3ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
			//0ï¿½ï¿½OC1Nï¿½ßµï¿½Æ½ï¿½ï¿½Ð§ï¿½ï¿½
			//1ï¿½ï¿½OC1Nï¿½Íµï¿½Æ½ï¿½ï¿½Ð§ï¿½ï¿½
			//×¢1ï¿½ï¿½Ò»ï¿½ï¿½LOCKï¿½ï¿½ï¿½ï¿½(TIM1_BKRï¿½Ä´ï¿½ï¿½ï¿½ï¿½Ðµï¿½LCCKÎ»)ï¿½ï¿½Îª3ï¿½ï¿½2ï¿½ï¿½CC1S=00(Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿?) ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ü±ï¿½ï¿½Þ¸Ä¡ï¿?
			//×¢2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ô¤×°ï¿½ØµÄ¡ï¿½ï¿½ï¿½ï¿½CCPC=1ï¿½ï¿½TIM1_CR2ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö»ï¿½ï¿½ï¿½ï¿½
			//COMï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½CC1NPÎ»ï¿½Å´ï¿½Ô¤×°ï¿½ï¿½Î»ï¿½ï¿½È¡ï¿½ï¿½Öµï¿½ï¿½
		//BIT2ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿?
			//0ï¿½ï¿½ï¿½Ø±Õ£ï¿½ OC1Nï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½OC1Nï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½MOEï¿½ï¿½OSSIï¿½ï¿½OSSRï¿½ï¿½OIS1ï¿½ï¿½
			//OIS1Nï¿½ï¿½CC1EÎ»ï¿½ï¿½Öµï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ OC1Nï¿½Åºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Å£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½MOEï¿½ï¿½OSSIï¿½ï¿½OSSRï¿½ï¿½
			//OIS1ï¿½ï¿½OIS1Nï¿½ï¿½CC1EÎ»ï¿½ï¿½Öµï¿½ï¿½
			//×¢ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ô¤×°ï¿½ØµÄ¡ï¿½ï¿½ï¿½ï¿½CCPC=1(TIM1_CR2ï¿½Ä´ï¿½ï¿½ï¿½)ï¿½ï¿½Ö»ï¿½ï¿½ï¿½ï¿½
			//COMï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½CC1NEÎ»ï¿½Å´ï¿½Ô¤×°ï¿½ï¿½Î»ï¿½ï¿½È¡ï¿½ï¿½Öµï¿½ï¿½
		//BIT1ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿?
			//0ï¿½ï¿½OC1ï¿½ßµï¿½Æ½ï¿½ï¿½Ð§ï¿½ï¿½
			//1ï¿½ï¿½OC1ï¿½Íµï¿½Æ½ï¿½ï¿½Ð§ï¿½ï¿½
			//CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½(ï¿½Î¿ï¿½Í¼61)ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI1Fï¿½Ä¸ßµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI1Fï¿½ÄµÍµï¿½Æ½ï¿½ï¿½ï¿½Â½ï¿½ï¿½Ø¡ï¿½
			//CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½(ï¿½Î¿ï¿½Í¼61)ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½×½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI1Fï¿½Ä¸ßµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
			//1ï¿½ï¿½ï¿½ï¿½×½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TI1Fï¿½ÄµÍµï¿½Æ½ï¿½ï¿½ï¿½Â½ï¿½ï¿½Ø¡ï¿½
			//×¢1ï¿½ï¿½Ò»ï¿½ï¿½LOCKï¿½ï¿½ï¿½ï¿½(TIM1_BKRï¿½Ä´ï¿½ï¿½ï¿½ï¿½Ðµï¿½LCCKÎ»)ï¿½ï¿½Îª3ï¿½ï¿½2ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ü±ï¿½ï¿½Þ¸Ä¡ï¿?
			//×¢2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ô¤×°ï¿½ØµÄ¡ï¿½ï¿½ï¿½ï¿½CCPC=1ï¿½ï¿½TIM1_CR2ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö»ï¿½ï¿½ï¿½ï¿½
			//COMï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½CC1PÎ»ï¿½Å´ï¿½Ô¤×°ï¿½ï¿½Î»ï¿½ï¿½È¡ï¿½ï¿½Öµï¿½ï¿½
		//BIT0ï¿½ï¿½ï¿½ï¿½ï¿½ë²¶ï¿½ï¿½/ï¿½È½ï¿½1ï¿½ï¿½ï¿½Ê¹ï¿½ï¿?
			//CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿?
			//0ï¿½ï¿½ ï¿½Ø±Õ£ï¿½ OC1ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½OC1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½MOEï¿½ï¿½OSSIï¿½ï¿½OSSRï¿½ï¿½OIS1ï¿½ï¿½OIS1Nï¿½ï¿½CC1NEÎ»ï¿½ï¿½Öµï¿½ï¿½
			//1ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ OC1ï¿½Åºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Å£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½MOEï¿½ï¿½OSSIï¿½ï¿½OSSRï¿½ï¿½OIS1 ï¿½ï¿½ OIS1N ï¿½ï¿½ CC1NE Î» ï¿½ï¿½ Öµ ï¿½ï¿½                                                                                          CC1Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ë£º
			//ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½Ë¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½Ç·ï¿½ï¿½Ü²ï¿½ï¿½ï¿½ï¿½ï¿½TIM1_CCR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿?
			//0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ü¡ï¿½
			//×¢ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ô¤×°ï¿½ØµÄ¡ï¿½ï¿½ï¿½ï¿½CCPC=1(TIM1_CR2ï¿½Ä´ï¿½ï¿½ï¿½)ï¿½ï¿½Ö»ï¿½ï¿½ï¿½ï¿½
			//COMï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½CC1EÎ»ï¿½Å´ï¿½Ô¤×°ï¿½ï¿½Î»ï¿½ï¿½È¡ï¿½ï¿½Öµï¿½ï¿½
	//TIM1CCER2 =0B01010000;  //4 
    TIM1CCER2 =0B00000000;  //4 
    
    TIM1CNTRH =0B00000000;//TIM1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
    TIM1CNTRL =0B00000000;
    
    TIM1PSCRH =0B00000000;
    TIM1PSCRL =0B00000000;
    
    TIM1ARRH =0x03;        //ï¿½Ô¶ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½ 
    TIM1ARRL =0;//0xe8;    //62.5NS * 768 = 48US = 20.8K
    
    TIM1RCR =0B00001111;   //ï¿½Ø¸ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµ
    
    //TIM1CCR1H =0;//0x01;       //PWMï¿½ï¿½ï¿½ï¿½
    //TIM1CCR1L =0;//0xf4;
    
    //TIM1CCR2H =0B00000000;
    //TIM1CCR2L =0B00000000;
    
    //TIM1CCR3H =0B00000000;
    //TIM1CCR3L =0B00000000;
    
    TIM1CCR4H =0B00000000;
    TIM1CCR4L =0B00000000;
    
    TIM1BKR =0B11000000;   //ï¿½ï¿½ï¿½Ê¹ï¿½Ü£ï¿½ï¿½ï¿½Ö¹É²ï¿½ï¿?
    TIM1DTR =0B00000111;   //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
    //BIT7~BIT0: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,ï¿½ï¿½Ð©Î»ï¿½ï¿½ï¿½ï¿½ï¿½Ë²ï¿½ï¿½ë»¥ï¿½ï¿½ï¿½ï¿½ï¿½Ö?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ä¡£ï¿½ï¿½ï¿½ï¿½DTï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ä£¬tCK_PSCÎªTIM1ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½å£º
		//DTG[7:5]=0xx => DT=DTG[7:0]x tdtgï¿½ï¿½ï¿½ï¿½ï¿½Ð£ï¿½ tdtg=tCK_PSC.	(f1)
		//DTG[7:5]=10x => DT=(64+DTG[5:0])x tdtgï¿½ï¿½ï¿½ï¿½ï¿½Ð£ï¿½tdtg= tCK_PSC.	(f2) 
		//DTG[7:5]=110 => DT=(32+DTG[4:0])x tdtgï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½tdtg=8x tCK_PSC. (f3) 
		//DTG[7:5]=111 => DT=(32+DTG[4:0])x tdtgï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½ ï¿½ï¿½tdtg=16x tCK_PSC. (f4)

    TIM1OISR =0B00000000; //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×´Ì?ï¿½ï¿½ï¿½ï¿½
    //BIT1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×´Ì?1(OC1Nï¿½ï¿½ï¿?)ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½MOE=0Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½OC1N=0ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½MOE=0Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½OC1N=1ï¿½ï¿½
			//×¢ï¿½ï¿½ï¿½Ñ¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½LOCK(TIM1_BKRï¿½Ä´ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½2ï¿½ï¿½3ï¿½ó£¬¸ï¿½Î»ï¿½ï¿½ï¿½Ü±ï¿½ï¿½Þ¸Ä¡ï¿½
		//BIT0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×´Ì?1(OC1ï¿½ï¿½ï¿?)ï¿½ï¿½
			//0ï¿½ï¿½ï¿½ï¿½MOE=0Ê±ï¿½ï¿½ï¿½ï¿½ï¿½OC1NÊ¹ï¿½Ü£ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½OC1=0ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½MOE=0Ê±ï¿½ï¿½ï¿½ï¿½ï¿½OC1NÊ¹ï¿½Ü£ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½OC1=1ï¿½ï¿½
			//×¢ï¿½ï¿½ï¿½Ñ¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½LOCK(TIM1_BKRï¿½Ä´ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½2ï¿½ï¿½3ï¿½ó£¬¸ï¿½Î»ï¿½ï¿½ï¿½Ü±ï¿½ï¿½Þ¸Ä¡ï¿½

    LEBCON =0B00000000; //Ç°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¹
    //BIT7	Ç°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ADGO=0Ê±ï¿½É½ï¿½ï¿½ï¿½ï¿½Ð»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ADCï¿½ï¿½ï¿½ï¿½ï¿½ì³£ï¿½ï¿½
			//1 = Ê¹ï¿½ï¿½
			//0 = ï¿½ï¿½Ö¹
		//BIT6~BIT5:	Ç°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½Ñ¡ï¿½ï¿½
			//00 = TIM1_CH1
			//01 = TIM1_CH2
			//10 = TIM1_CH3
			//11 = TIM1_CH4
		//BIT4:N/A	ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½0
		//BIT3:	PWMï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¡ï¿½ï¿½
			//0 = PWMï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1 = PWMï¿½Â½ï¿½ï¿½ï¿½
		//BIT2~BIT0:TIM1ï¿½Ä¹ï¿½ï¿½ï¿½Ô´Ê¹ï¿½Ü£ï¿½ï¿½ï¿½ï¿½ï¿½Ð§
			//BKS2ï¿½ï¿½Ñ¡ï¿½ï¿½ADCï¿½ï¿½Öµï¿½È½ï¿½
			//BKS1ï¿½ï¿½Ñ¡ï¿½ï¿½LVDï¿½ï¿½ï¿?
			//BKS0ï¿½ï¿½Ñ¡ï¿½ï¿½BKINï¿½Ü½ï¿½
}


/*-------------------------------------------------
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½Time2Initial
 *	ï¿½ï¿½ï¿½Ü£ï¿½    TIM2Í¨ï¿½ï¿½ï¿½Ð¶ï¿½ï¿½ï¿½RB3ï¿½ï¿½ï¿½Æµï¿½ï¿½Î?4kHzï¿½Ä·ï¿½ï¿½ï¿½
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
 *	ï¿½ï¿½ï¿½Ø²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 -------------------------------------------------*/
void Time2Initial(void)
{
	PCKEN |=0B00000100;    //Ê¹ï¿½ï¿½timer2Ê±ï¿½ï¿½Ä£ï¿½ï¿½
    CKOCON=0B00100000;
    TCKSRC|=0B00010000;    //TIM2Ê±ï¿½ï¿½ÎªHIRCï¿½ï¿½1ï¿½ï¿½Æµ
	TIM2CR1 =0B10000101;  //Ô¤ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½ï¿½
	TIM2IER =0B00000001;
    //TIM2ARRH =0x0B;        //ï¿½Ô¶ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½
    //TIM2ARRL =0x90;        //62.5NS * 2960 =  185us *2= 2.7K    
    TIM2ARRH =0x06;        //ï¿½Ô¶ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½
    TIM2ARRL =0x40;          //62.5NS * 1600 =  100us
    //GIE =1;                //ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
  }

/*----------------------------------------------------
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½TIMER4_INITIAL
 *	ï¿½ï¿½ï¿½Ü£ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½Ã¶ï¿½Ê±ï¿½ï¿½
 *
 *	ï¿½ï¿½ï¿½ï¿½TMR4ï¿½ï¿½Ê±Ê±ï¿½ï¿½560us                     
 ----------------------------------------------------*/
void Time4Initial(void)
{
	PCKEN |=0B00001000;      //TIME4Ä£ï¿½ï¿½Ê±ï¿½ï¿½Ê¹ï¿½ï¿½
    //CKOCON=0B00110000;
    //TCKSRC=0B00000011;		
    
    TIM4CR1	=0B00000101;    //HIRC
    //BIT7: 0ï¿½ï¿½TIM1_ARRï¿½Ä´ï¿½ï¿½ï¿½Ã»ï¿½Ð»ï¿½ï¿½å£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ô±ï¿½Ö±ï¿½ï¿½Ð´ï¿½ï¿½; 1ï¿½ï¿½TIM1_ARRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤×°ï¿½Ø»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½å¡£
    //BIT6:ï¿½ï¿½ï¿½ï¿½
    //BIT5~BIT4:timer4Ê±ï¿½ï¿½Ñ¡ï¿½ï¿½Î»ï¿½ï¿½
        		//00ï¿½ï¿½ÏµÍ³Ê±ï¿½ï¿½/ï¿½ï¿½Ê±ï¿½ï¿½
				//01ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½Ê±ï¿½ï¿½HIRC
				//10ï¿½ï¿½LPÊ±ï¿½Ó£ï¿½Ö»ï¿½Ðµï¿½FOSCÑ¡ï¿½ï¿½LPÄ£Ê½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
				//11ï¿½ï¿½XTÊ±ï¿½Ó£ï¿½Ö»ï¿½Ðµï¿½FOSCÑ¡ï¿½ï¿½XTÄ£Ê½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½

    //BIT3:
    //			0ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö¹ï¿½ï¿½
	//			1ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½Î¸ï¿½ï¿½ï¿½ï¿½Â¼ï¿½(ï¿½ï¿½ï¿½CENÎ»)Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö¹ï¿½ï¿½

    //BIT2:
   	// 		0ï¿½ï¿½ï¿½ï¿½ï¿½UDISï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½
				//ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½)
				//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»
				//Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¸ï¿½ï¿½ï¿½
	//		1ï¿½ï¿½ï¿½ï¿½ï¿½UDISï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ö»ï¿½Ðµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½Å²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½ï¿½ï¿½UIFï¿½ï¿½1ï¿½ï¿½
				//ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½)

    //BIT1:
    //		0ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(UEV)ï¿½Â¼ï¿½ï¿½ï¿½
				//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?/ï¿½ï¿½ï¿½ï¿½
				//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½
				//Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½×°ï¿½ï¿½ï¿½ï¿½ï¿½Çµï¿½Ô¤×°ï¿½ï¿½Öµï¿½ï¿?
	//		1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½Ó°ï¿½Ó¼Ä´ï¿½ï¿½ï¿½(ARRï¿½ï¿½PSCï¿½ï¿½CCRx)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Çµï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»ï¿½ï¿½Ê±ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¤ï¿½ï¿½Æµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½ï¿½ï¿?

    // BIT0: 0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½Ê¹ï¿½Ü¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½


    TIM4IER	=0B00000001;
    //BIT0:  0ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï£ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ï¡ï¿½

    TIM4SR	=0B00000000;
    //BIT0:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½Ê±ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´1ï¿½ï¿½0
			//0ï¿½ï¿½ï¿½Þ¸ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			//1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½È´ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Î»ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½
			//ï¿½ï¿½TIM4_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UDIS=0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿?
			//ï¿½ï¿½TIM4_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UDIS=0ï¿½ï¿½URS=0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIM4_EGRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»ï¿½ï¿½ï¿½ï¿½ï¿½Ô¼ï¿½ï¿½ï¿½ï¿½ï¿½
			//CNTï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½Ê±ï¿½ï¿½
			//ï¿½ï¿½TIM4_CR1ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UDIS=0ï¿½ï¿½URS=0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CNTï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½Ê±ï¿½ï¿½

    TIM4EGR	=0B00000000;
    //BIT0:ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½0ï¿½ï¿½
	//0ï¿½ï¿½ï¿½Þ¶ï¿½ï¿½ï¿½ï¿½ï¿½
	//1ï¿½ï¿½ï¿½ï¿½ï¿½Â³ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½×¢ï¿½ï¿½Ô¤ï¿½ï¿½Æµï¿½ï¿½ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½ï¿½0(ï¿½ï¿½ï¿½ï¿½Ô¤ï¿½ï¿½ÆµÏµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¶Ô³ï¿½Ä£Ê½ï¿½Â»ï¿½DIR=0(ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?0ï¿½ï¿½ï¿½ï¿½DIR=1(ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È?TIM1_ARRï¿½ï¿½Öµï¿½ï¿½

    TIM4CNTR=0; //TIM4 8Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
    
    TIM4PSCR=0B00000110;
    //Ô¤ï¿½ï¿½Æµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½CK_PSCÊ±ï¿½Ó½ï¿½ï¿½Ð·ï¿½Æµï¿½ï¿½
	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Æµï¿½ï¿½fCK_CNTï¿½ï¿½ï¿½ï¿½fCK_PSC/2(PSC[2:0])ï¿½ï¿½PSC[7:3]ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½0ï¿½ï¿½
	//PSCRï¿½ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê±×°ï¿½ëµ±Ç°Ô¤ï¿½ï¿½Æµï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Öµ(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½TIMx_EGRï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½UGÎ»ï¿½ï¿½ï¿½ï¿½ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿?)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î¶ï¿½ï¿½ï¿½ï¿½Òªï¿½Âµï¿½Ô¤ï¿½ï¿½ÆµÖµï¿½ï¿½Ð§ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½CEN=0ï¿½ï¿½
    TIM4ARR	=124;  //8usÊ±ï¿½ï¿½ï¿½×? 1ms
    TIM4ARR	=24;  //8us * 23 =  185us *2= 2.7K 	
    //ARRï¿½ï¿½ï¿½ï¿½ï¿½Ë½ï¿½Òª×°ï¿½ï¿½ï¿½ï¿½Êµï¿½Êµï¿½ï¿½Ô¶ï¿½ï¿½ï¿½×°ï¿½Ø¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½
	//ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½×°ï¿½Øµï¿½ÖµÎªï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½

    //INTCON |= 0B11000000;    //ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ïºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
  }


/*-------------------------------------------------
 *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½: Px_Level_Change_INITIAL
 *	ï¿½ï¿½ï¿½Ü£ï¿½  ï¿½Ë¿Úµï¿½Æ½ï¿½ä»¯ï¿½Ð¶Ï³ï¿½Ê¼ï¿½ï¿½
 *  ï¿½ï¿½ï¿½ë£º  ï¿½ï¿½
 *  ï¿½ï¿½ï¿½ï¿½ï¿?  ï¿½ï¿½
--------------------------------------------------*/
void Px_Level_Change_INITIAL(void)
{
    EPS0=0B00000000; 	//
    //Px0~Px3ï¿½Ð¶Ï¹Ü½ï¿½Ñ¡ï¿½ï¿½
    EPS1=0B00000001;   //Ñ¡ï¿½ï¿½PB4ï¿½Ü½ï¿½ï¿½Ð¶ï¿½
    //Px4~Px7ï¿½Ð¶Ï¹Ü½ï¿½Ñ¡ï¿½ï¿½ 
    ITYPE0 = 0B00000000;//Ë«ï¿½ï¿½ï¿½Ð¶ï¿½
    ITYPE1 = 0B11000000;  
    EPIE0  = 0B00010000;//Ê¹ï¿½ï¿½ï¿½Ð¶ï¿½4
    INTCON = 0B01000000;  //ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½Ê¹ï¿½ï¿½
}

/*-------------------------------------------------
 *  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½: UART_INITIAL
 *	ï¿½ï¿½ï¿½Ü£ï¿½  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  ï¿½ï¿½ï¿½ë£º  ï¿½ï¿½
 *  ï¿½ï¿½ï¿½ï¿½ï¿?  ï¿½ï¿½
 --------------------------------------------------*/
void UART_INITIAL(void)
{
	PCKEN |=0B00100000;	//ï¿½ï¿½UARTÊ±ï¿½ï¿½
    
    URIER =0B00000000;  //Ê¹ï¿½Ü·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
    URLCR =0B00000001;  //8Î»ï¿½ï¿½ï¿½Ý£ï¿½Í£Ö¹Î»1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Å¼Ð£ï¿½ï¿½
    URMCR =0B00011000;
    
    //URDLL =104;         //9600ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ = Fosc/16*[URDLH:URDLL]   16M
	URDLL =52;         //9600ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ = Fosc/16*[URDLH:URDLL]   8M
    URDLH =0;
    TCF=1;
	//INTCON=0B11000000;
    //TCF: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É±ï¿½Ö?
    //TXEF:1ï¿½ï¿½ï¿½Í¼Ä´ï¿½ï¿½ï¿½Îªï¿½ï¿½
    //RXNEF:1ï¿½ï¿½ï¿½Õ¼Ä´ï¿½ï¿½ï¿½ï¿½Ç¿ï¿½
}

/*------------------------------------------------- 
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½DelayUs
 *	ï¿½ï¿½ï¿½Ü£ï¿½   ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ --16M-2T--ï¿½ï¿½Å¿ï¿?1%ï¿½ï¿½ï¿½ï¿½.
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Timeï¿½ï¿½Ê±Ê±ï¿½ä³¤ï¿½ï¿½ ï¿½ï¿½Ê±Ê±ï¿½ï¿½Time Us
 *	ï¿½ï¿½ï¿½Ø²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 -------------------------------------------------*/
void DelayUs(unsigned char Time)
{
	unsigned char a;
	for(a=0;a<Time;a++)
	{
		NOP();
	}
}                  
/*-------------------------------------------------
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½DelayMs
 *	ï¿½ï¿½ï¿½Ü£ï¿½   ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Timeï¿½ï¿½Ê±Ê±ï¿½ä³¤ï¿½ï¿½ ï¿½ï¿½Ê±Ê±ï¿½ï¿½Time ms
 *	ï¿½ï¿½ï¿½Ø²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 -------------------------------------------------*/
void DelayMs(unsigned char Time)
{
	unsigned char a,b;
	for(a=0;a<Time;a++)
	{
		for(b=0;b<5;b++)
		{
		 	DelayUs(197); //ï¿½ï¿½1%
		}
		CLRWDT();
	}
}
/*-------------------------------------------------
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½DelayS
 *	ï¿½ï¿½ï¿½Ü£ï¿½   ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½
 *	ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Timeï¿½ï¿½Ê±Ê±ï¿½ä³¤ï¿½ï¿½ ï¿½ï¿½Ê±Ê±ï¿½ï¿½Time S
 *	ï¿½ï¿½ï¿½Ø²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 -------------------------------------------------*/
void DelayS(unsigned char Time)
{
	unsigned char a,b;
	for(a=0;a<Time;a++)
	{
		for(b=0;b<10;b++)
		{
		 	DelayMs(100); 
		}
	}
}

void TIME_INIT()
{
	Time100Ms=0;
	TimeSec=0;
	//TimeMin=0;
}


void User_init()
{
	uSysFunFlg0 = off;
	uSysFunFlg1 = off; 
	uSysFunFlg2 = off; 
	TIME_INIT();

	KeyType=NullKey; 
    DspIndex =DsSty; 	
}

void Display_init()
{
	// SetAllLed();
	// uchar delayCnt=0;
	// while (++delayCnt<100)
	// {
	// 	SetCom1();
	// 	DelayMs(1);
	// 	SetCom2()
	// 	DelayMs(1);
	// 	SetCom3();
	// 	DelayMs(1);
	// 	SetCom4()
	// 	DelayMs(1);
	// }

	ClrAllLed() 
	INTCON |= 0B11000000;    //ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶Ïºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
}











